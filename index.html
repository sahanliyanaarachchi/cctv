<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Human Alert</title>

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/10.14.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.14.0/firebase-database-compat.js"></script>

<style>
body{background:#000; color:#f00; font-family:Arial; display:flex; flex-direction:column; align-items:center; justify-content:center; height:100vh; margin:0; text-align:center;}
h2{font-size:2rem; margin-bottom:15px; text-shadow:0 0 10px #f00;}
#status{font-size:1.4rem; margin-top:10px; color:#ff6666;}
#alertGif{display:none;width:200px; height:200px; object-fit:contain; margin-top:20px;}
#screenshot{display:none;width:300px; margin-top:20px; border:2px solid #f00; border-radius:10px;}
</style>
</head>
<body>
<h2>ðŸš¨ HUMAN ALERT SYSTEM ðŸš¨</h2>
<div id="status">Waiting for detection...</div>
<img id="alertGif" src="a.webp" alt="Alert">
<img id="screenshot" src="" alt="Screenshot">
<audio id="alarmSound" src="d.mp3" preload="auto"></audio>

<script>
const firebaseConfig = {
  apiKey: "AIzaSyCeF1gnf_KJvIiRMy-_aSfIIurQq_8l1iI",
  authDomain: "dansal-map-e0185.firebaseapp.com",
  databaseURL: "https://dansal-map-e0185-default-rtdb.firebaseio.com",
  projectId: "dansal-map-e0185",
  storageBucket: "dansal-map-e0185.appspot.com",
  messagingSenderId: "1006285824505",
  appId: "1:1006285824505:web:135f9efdecb03073a15d28",
  measurementId: "G-C8LJT9MD3X"
};

firebase.initializeApp(firebaseConfig);
const db=firebase.database();

const alarmSound=document.getElementById("alarmSound");
const alertGif=document.getElementById("alertGif");
const statusEl=document.getElementById("status");
const screenshot=document.getElementById("screenshot");

db.ref("humanAlert").on("value", snapshot=>{
  const data=snapshot.val();
  if(data && data.personDetected){
    alertGif.style.display="block";
    statusEl.textContent="ðŸŸ¢ HUMAN DETECTED!";
    statusEl.style.color="#00ff00";
    if(data.screenshot)screenshot.src=data.screenshot;
    screenshot.style.display=data.screenshot?"block":"none";
    if(alarmSound.paused){alarmSound.currentTime=0; alarmSound.play().catch(err=>console.log("Sound blocked",err));}
    if("vibrate" in navigator) navigator.vibrate([300,200,300]);
  } else {
    alertGif.style.display="none";
    statusEl.textContent="ðŸ”´ No Human Detected";
    statusEl.style.color="#ff3333";
    screenshot.style.display="none";
    alarmSound.pause();
  }
});
</script>
</body>
</html>
